<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat Messages</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
  <link rel="shortcut icon" href="/static/images/Favicon.jpg" type="image/x-icon">
  <link rel="stylesheet" href="/roles/CustomerServiceOfficer/Styles/chatmessage.css">
  <script src="https://unpkg.com/wavesurfer.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-gray-100 h-screen flex">
  <aside id="sidebar" class="w-72 bg-white border-r shadow-sm flex flex-col transition-all duration-300">
    <div class="flex items-center justify-between p-4 border-b">
      <span id="brandText" class="text-xl font-bold text-blue-600">Customer Service</span>
      <button id="toggleBtn" class="p-2 rounded hover:bg-blue-50 text-blue-600">
        <i data-lucide="chevron-left"></i>
      </button>
    </div>
    <nav class="flex-1 p-4 space-y-2">
      <a href="/roles/CustomerServiceOfficer/Dashboard.html" class="flex items-center p-2 rounded-lg hover:bg-blue-50 text-gray-700">
        <i data-lucide="layout-dashboard" class="mr-3"></i><span class="link-text">Dashboard</span>
      </a>
      <a href="/roles/CustomerServiceOfficer/notifications.html" class="flex items-center p-2 rounded-lg hover:bg-blue-50 text-gray-700">
        <i data-lucide="bell" class="mr-3"></i><span class="link-text">Notifications</span>
      </a>
      <a href="/roles/CustomerServiceOfficer/chatthread.html" class="flex items-center p-2 rounded-lg bg-blue-500 text-white active-link">
        <i data-lucide="message-circle" class="mr-3"></i><span class="link-text">Threads</span>
      </a>
      <a href="#" class="flex items-center p-2 rounded-lg hover:bg-blue-50 text-gray-700">
        <i data-lucide="search" class="mr-3"></i><span class="link-text">Search Orders</span>
      </a>
      <a href="/roles/CustomerServiceOfficer/customers.html" class="flex items-center p-2 rounded-lg hover:bg-blue-50 text-gray-700">
        <i data-lucide="users" class="mr-3"></i><span class="link-text">Customers</span>
      </a>
      <a href="/roles/CustomerServiceOfficer/profile.html" class="flex items-center p-2 rounded-lg hover:bg-blue-50 text-gray-700">
        <i data-lucide="user" class="mr-3"></i><span class="link-text">Profile</span>
      </a>
      <a href="/roles/CustomerServiceOfficer/settings.html" class="flex items-center p-2 rounded-lg hover:bg-blue-50 text-gray-700">
        <i data-lucide="settings" class="mr-3"></i><span class="link-text">Settings</span>
      </a>
      <a href="/general/Home.htm" class="flex items-center p-2 rounded-lg hover:bg-red-300 text-gray-700">
      <i data-lucide="log-out" class="mr-3"></i>
      <span class="link-text">Logout</span>
    </a>
    </nav>
    <div id="csoInfo" class="p-4 border-t flex items-center space-x-3">
    <img id="csoPic" src="/" class="w-10 h-10 rounded-full border">
    <div id="csoDetails">
      <p id="csoName" class="font-semibold text-gray-800">Loading...</p>
      <p id="csoRole" class="text-sm text-gray-500">Customer Service Officer</p>
    </div>
    </div>
  </div>
  </aside>

  <main class="flex-1 flex flex-col overflow-hidden">
  
     <div class="bg-white border-b p-4 flex items-center justify-between sticky top-0 z-10">
    <div class="flex items-center space-x-3">
        <h2 class="font-semibold text-gray-800">Customer Support Issue</h2>
    </div>
     <div class="flex items-center space-x-3">
    <img src="/static/images/Favicon.jpg" alt="Customer" class="w-10 h-10 rounded-full border border-blue-300">
    <div>
      <h2 class="text text-gray-500">Customer</h2>
    </div>
  </div>
    <button id="closeChatBtn" 
          class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg text-sm flex items-center space-x-1">
    <i data-lucide="x-circle" class="w-4 h-4"></i>
    <span>Close Chat</span>
  </button>
  </div>


  <div class="flex-1 overflow-y-auto p-4 space-y-4" id="chat-messages">
    
 
  </div>

  <div id="previewArea" class="p-2 space-y-2 hidden"></div>
  <div id="messageBar" class="bg-white border-t p-3 flex items-end space-x-2 sticky bottom-0">
   
    <input type="file" id="imageInput" accept="image/*" class="hidden" />

    <button id="imageBtn" class="p-2 rounded-full hover:bg-gray-200">
      <i data-lucide="image"></i>
    </button>
    <button id="audioBtn" class="p-2 rounded-full hover:bg-gray-200">
      <i data-lucide="mic"></i>
    </button>

    <div id="recordingControls" class="hidden flex items-center space-x-2">
      <span id="recordingTimer" class="text-sm text-red-500 font-medium">0:00</span>
      <button id="stopRecordingBtn" class="p-2 rounded-full hover:bg-red-100 text-red-600">
        <i data-lucide="square"></i>
      </button>
      <button id="deleteRecordingBtn" class="p-2 rounded-full hover:bg-gray-200">
        <i data-lucide="trash"></i>
      </button>
    </div>

    <textarea 
      id="messageInput" 
      rows="1"
      placeholder="Type a message..." 
      class="flex-1 resize-none border rounded-2xl p-2 max-h-32 overflow-y-auto focus:outline-none"
    ></textarea>


    <button id="sendBtn" disabled class="bg-blue-600 text-white px-4 py-2 rounded-2xl flex items-center space-x-1 cursor-not-allowed">
      <span>Send</span>
      <i data-lucide="send" class="w-4 h-4"></i>
    </button>
  </div>
</main>


 
 <audio id="messageSound" src="/static/media/file-sounds-1150-pristine.mp3"></audio>
 <script src="/roles/CustomerServiceOfficer/Script/chatmessage.js"></script>
 <script src="/roles/CustomerServiceOfficer/Script/sidebar.js"></script>
</body>
</html>
